function LoginController(loginService,$location){var self=this;self.email="",self.password="",self.errorMessage="",self.$onInit=function(){},self.login=function(){loginService.login(self.email,self.password).then(function(response){self.errorMessage="",$location.path("/customers")},function(err){self.email="",self.password="",self.errorMessage=err.data})}}function LoginService($http){function login(email,password){return $http.post("/api/user/authenticate",{email:email,password:password})}return{login:login}}function FooterController(){}function NavigationController(){}function UtilsService(){return{findById:function(a,id){for(var i=0;i<a.length;i++)if(a[i].id==id)return a[i];return null}}}function CustomerDetailsController(customerDetailsService,$routeParams){var self=this;self.customer={},self.house={},self.rooms=[],self.params=$routeParams,self.$onInit=function(){self.params&&getCustomerDetails(self.params.id)};var getCustomerDetails=function(id){customerDetailsService.getCustomerByID(id).then(function(response){self.customer=response.data,getHomeDetails(self.customer.id,getRooms)},function(err){throw new Error(err.message)})},getHomeDetails=function(id,callback){customerDetailsService.getHomeByCustomerId(id).then(function(response){self.house=response.data,callback(self.house.homeID)},function(err){throw new Error(err.message)})},getRooms=function(id){customerDetailsService.getRoomsByHomeId(id).then(function(response){self.rooms=response.data},function(err){throw new Error(err.message)})}}function CustomerDetailsService($http){function getCustomerByID(id){return $http.get("/api/customer/"+id)}function getHomeByCustomerId(id){return $http.get("/api/house/"+id)}function getRoomsByHomeId(id){return $http.get("/api/house/"+id+"/rooms")}return{getCustomerByID:getCustomerByID,getHomeByCustomerId:getHomeByCustomerId,getRoomsByHomeId:getRoomsByHomeId}}function CustomerAddController(customerAddService,$location){var self=this;self.customer={firstName:null,lastName:null,address:null,phoneNumber:null,email:null},self.home={totalSize:null,numStories:null,numBedrooms:null,numBathrooms:null,acType:null,heatingType:null,installationDate:null},self.room={size:null,numWindows:null,numStory:null},self.rooms=[],self.options=[1,2,3,4,5,6],self.acTypes=["Central Air","Window Unit","Mini Split","Other"],self.heatTypes=["Furnace","Boiler","Heat Pump","Gas","Other"],self.clearCustomerInfoForm=function(){self.customer.firstName=null,self.customer.lastName=null,self.customer.address=null,self.customer.phoneNumber=null,self.customer.email=null},self.clearHomeForm=function(){self.home.totalSize=null,self.home.numStories=null,self.home.numBedrooms=null,self.home.numBathrooms=null,self.home.acType=null,self.home.heatingType=null,self.home.installationDate=null},self.clearRoomForm=function(){self.room.size=null,self.room.numWindows=null,self.room.numStory=null},self.addRoom=function(room){self.rooms.push({size:room.size,numWindows:room.numWindows,numStory:room.numStory}),self.clearRoomForm()},self.removeRoom=function(index){self.rooms.splice(index,1)},self.setSessionForSummary=function(){"localStorage"in window&&null!==window.localStorage&&(localStorage.clear(),localStorage.customerInfo=JSON.stringify(self.customer),localStorage.homeInfo=JSON.stringify(self.home),localStorage.roomsInfo=JSON.stringify(self.rooms)),$location.path("/customer/new/summary")}}function CustomerAddService($http){return{}}function CustomerListController(customerListService,$location){var self=this;self.customers=[],self.$onInit=function(){customerListService.getCustomerList().then(function(response){self.customers=response.data},function(err){throw new Error(err.message)})},self.viewCustomerDetails=function(id){$location.path("/customer/"+id)},self.addNewCustomer=function(){$location.path("/customer/new")}}function CustomerListService($http){function getCustomerList(){return $http.get("/api/customers")}return{getCustomerList:getCustomerList}}function CustomerSummaryController(customerSummaryService,$location){var self=this;self.customerInfo={},self.homeInfo={},self.rooms=[],self.$onInit=function(){getInfoFromLocalStorage()},self.save=function(){saveCustomerInfo(),localStorage.clear(),$location.path("/customers")};var getInfoFromLocalStorage=function(){"localStorage"in window&&null!==window.localStorage&&(localStorage.customerInfo&&(self.customerInfo=JSON.parse(localStorage.customerInfo)),localStorage.homeInfo&&(self.homeInfo=JSON.parse(localStorage.homeInfo)),localStorage.roomsInfo&&(self.rooms=JSON.parse(localStorage.roomsInfo)))},saveCustomerInfo=function(){customerSummaryService.saveCustomerInfo(self.customerInfo).then(function(response){saveHouseInfo(response.data.id)},function(error){throw console.log(error),new Error(error.message)})},saveHouseInfo=function(customerId){var reqObj={customerId:customerId,homeInfo:self.homeInfo,roomsInfo:self.rooms};customerSummaryService.saveHomeInfo(reqObj).then(function(data){},function(error){throw console.log(error),new Error(error.message)})}}function CustomerSummaryService($http){function saveHomeInfo(data){return $http.post("/api/house/save",data)}function saveCustomerInfo(data){return $http.post("/api/customer/save",data)}return{saveHomeInfo:saveHomeInfo,saveCustomerInfo:saveCustomerInfo}}angular.module("main",["ngMaterial","ngMessages","ngRoute"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{template:"<login></login>"}).when("/customers",{template:"<customer-list></customer-list>"}).when("/customer/new",{template:"<customer-add></customer-add>"}).when("/customer/new/summary",{template:"<customer-summary></customer-summary>"}).when("/customer/:id",{template:"<customer-details></customer-details>"})}]),angular.module("main").component("login",{templateUrl:"views/login/login.template.html",controller:LoginController}),LoginController.$inject=["login.service","$location"],angular.module("main").factory("login.service",LoginService),LoginService.$inject=["$http"],angular.module("main").component("bottomNav",{templateUrl:"views/common/footer.template.html",controller:FooterController}),FooterController.$inject=[],angular.module("main").component("topNav",{templateUrl:"views/common/header.template.html"}),NavigationController.$inject=[],angular.module("main").factory("utils.service",UtilsService),UtilsService.$inject=[],angular.module("main").component("customerDetails",{templateUrl:"views/customer/customer-details/customer-details.template.html",controller:CustomerDetailsController}),CustomerDetailsController.$inject=["customer-details.service","$routeParams"],angular.module("main").factory("customer-details.service",CustomerDetailsService),CustomerDetailsService.$inject=["$http"],angular.module("main").component("customerAdd",{templateUrl:"views/customer/customer-add/customer-add.template.html",controller:CustomerAddController}),CustomerAddController.$inject=["customer-add.service","$location"],angular.module("main").factory("customer-add.service",CustomerAddService),CustomerAddService.$inject=["$http"],angular.module("main").component("customerList",{templateUrl:"views/customer/customer-list/customer-list.template.html",controller:CustomerListController}),CustomerListController.$inject=["customer-list.service","$location"],angular.module("main").factory("customer-list.service",CustomerListService),CustomerListService.$inject=["$http"],angular.module("main").component("customerSummary",{templateUrl:"views/customer/customer-summary/customer-summary.template.html",controller:CustomerSummaryController}),CustomerSummaryController.$inject=["customer-summary.service","$location"],angular.module("main").factory("customer-summary.service",CustomerSummaryService),CustomerSummaryService.$inject=["$http"];
//# sourceMappingURL=bundle.js.map
